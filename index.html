<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zayd VIN & Traffic Hub</title>
    <style>
        :root { --primary: #1db954; --dark: #0f0f0f; --card: #1c1c1c; --text: #eee; }
        body { background: var(--dark); color: var(--text); font-family: -apple-system, sans-serif; text-align: center; margin: 0; padding: 15px; line-height: 1.5; }
        
        /* Branding */
        .branding { margin-bottom: 15px; }
        .instagram { display: flex; justify-content: center; align-items: center; gap: 8px; font-weight: bold; margin-bottom: 10px; font-size: 14px; color: #bbb; }
        .instagram img { width: 18px; height: 18px; }
        select#language { padding: 6px 12px; border-radius: 8px; background: #222; color: white; border: 1px solid #444; cursor: pointer; outline: none; }

        /* Navigation */
        .nav-tabs { display: flex; justify-content: center; gap: 8px; margin: 20px auto; max-width: 400px; }
        .tab-btn { background: #222; border: 1px solid #444; color: #888; padding: 12px; border-radius: 10px; cursor: pointer; flex: 1; font-weight: bold; transition: 0.3s; }
        .tab-btn.active { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 0 15px rgba(29, 185, 84, 0.2); }

        .container { background: var(--card); margin: 10px auto; padding: 20px; width: 100%; max-width: 420px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.5); box-sizing: border-box; }

        /* Interactive VIN Map */
        .vin-map { display: flex; justify-content: center; background: #000; padding: 12px 5px; border-radius: 8px; font-family: monospace; gap: 4px; border: 1px solid #333; margin-bottom: 15px; overflow-x: auto; }
        .vin-seg { display: flex; flex-direction: column; align-items: center; min-width: 30px; }
        .vin-seg span { font-size: 13px; font-weight: bold; letter-spacing: 1px; }
        .vin-seg small { font-size: 7px; color: #555; margin-top: 4px; text-transform: uppercase; }
        .year-highlight span { background: rgba(29, 185, 84, 0.2); padding: 0 3px; border-radius: 4px; color: var(--primary); }

        /* VIN Decoder Input */
        .input-wrapper { position: relative; }
        input#vinInput { width: 100%; padding: 15px; border-radius: 10px; border: 1px solid #333; background: #000; color: var(--primary); font-family: monospace; font-size: 18px; box-sizing: border-box; outline: none; }
        #charCount { position: absolute; right: 12px; top: 18px; font-size: 11px; color: #666; }
        #errorMsg { color: #ff4d4d; font-size: 11px; height: 18px; margin-top: 5px; font-weight: bold; }

        button { width: 100%; padding: 14px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; font-size: 16px; transition: 0.2s; margin-top: 10px; }
        #decodeBtn { background: var(--primary); color: white; }
        .auction-btn { background: #007bff; color: white; }
        .fines-go-btn { background: #e67e22; color: white; margin-top: 20px; }

        /* Info Guide List */
        .info-list { text-align: left; font-size: 12px; color: #aaa; padding-left: 20px; margin: 0; list-style-type: none; }
        .info-list li { margin-bottom: 5px; position: relative; padding-left: 15px; }
        .info-list li::before { content: "â€¢"; color: var(--primary); position: absolute; left: 0; font-weight: bold; }

        /* History & Cards */
        .history-item { background: #252525; padding: 12px; margin: 8px 0; border-radius: 8px; cursor: pointer; display: flex; justify-content: space-between; font-family: monospace; font-size: 13px; }
        
        /* Result Card with Logo Layout */
        .card-result { background: #2a2a2a; padding: 15px; border-radius: 10px; text-align: left; border-left: 4px solid var(--primary); margin-top: 15px; animation: slideUp 0.3s ease; }
        .brand-header { display: flex; align-items: center; gap: 12px; margin-bottom: 15px; }
        .brand-logo { width: 45px; height: 45px; background: white; border-radius: 8px; padding: 4px; object-fit: contain; flex-shrink: 0; }
        .brand-text-content { display: flex; flex-direction: column; }
        
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="branding">
  <div class="instagram">
    <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Insta">
    <span>Instagram : @zayd90000</span>
  </div>
  <select id="language" onchange="changeLanguage()">
    <option value="en">English</option>
    <option value="ku">Ú©ÙˆØ±Ø¯ÛŒ</option>
    <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
  </select>
</div>

<div class="nav-tabs">
  <button id="tabVin" class="tab-btn active" onclick="switchTab('vin')">VIN Decoder</button>
  <button id="tabFines" class="tab-btn" onclick="switchTab('fines')">Erbil Fines</button>
</div>

<div id="vinSection">
    <div class="container">
      <h2 id="structTitle" style="margin:0 0 15px 0; font-size:18px;">Complete VIN Guide</h2>
      <div class="vin-map">
        <div class="vin-seg"><span>1HG</span><small>WMI</small></div>
        <div class="vin-seg"><span>CP264</span><small>Specs</small></div>
        <div class="vin-seg"><span>8</span><small>Check</small></div>
        <div class="vin-seg year-highlight"><span>R</span><small>Year</small></div>
        <div class="vin-seg"><span>A</span><small>Plant</small></div>
        <div class="vin-seg"><span>123456</span><small>Serial</small></div>
      </div>
      <ul class="info-list">
          <li id="li1"><b>1-3:</b> Country & Manufacturer</li>
          <li id="li2"><b>4-8:</b> Engine, Type, & Model</li>
          <li id="li3"><b>9:</b> Security Check Digit</li>
          <li id="li4"><b>10:</b> Model Year (R = 2024)</li>
          <li id="li5"><b>11:</b> Assembly Plant Location</li>
          <li id="li6"><b>12-17:</b> Unique Serial No.</li>
      </ul>
    </div>

    <div class="container">
      <h1 id="title" style="margin:0 0 15px 0;">VIN Decoder ğŸš—</h1>
      <div class="input-wrapper">
        <input id="vinInput" maxlength="17" placeholder="Enter 17-digit VIN" oninput="handleInput(this)">
        <div id="charCount">0/17</div>
      </div>
      <div id="errorMsg"></div>
      <button onclick="decodeVIN()" id="decodeBtn">Decode & Search</button>
      <div id="result"></div>
    </div>

    <div class="container">
      <h3 id="histTitle" style="margin:0">Recent Searches</h3>
      <div id="historyList"></div>
      <button style="background:transparent; color:#555; font-size:12px; border:1px solid #333; margin-top:10px; width:auto; padding:5px 15px;" onclick="clearHistory()">Clear</button>
    </div>
</div>

<div id="finesSection" style="display: none;">
    <div class="container">
        <h1 id="finesTitle" style="margin:0">Erbil Traffic Fines</h1>
        <p style="font-size: 14px; color: #888; margin: 10px 0 25px 0;">Official MOI Fines Portal</p>
        <div style="border: 2px dashed var(--primary); padding: 20px; border-radius: 12px; text-align: left; background: #000;">
            <p style="margin-top:0">ğŸ“‹ <b>Check Requirements:</b></p>
            <div style="margin-bottom:10px;">âœ… Plate Number (Ú˜Ù…Ø§Ø±Û•ÛŒ ØªØ§Ø¨Ù„Û†)</div>
            <div>âœ… Registration No. (Ú˜Ù…Ø§Ø±Û•ÛŒ Ø³Ø§ÚµÙ†Ø§Ù…Û•)</div>
        </div>
        <button class="fines-go-btn" onclick="window.open('https://htp.moi.gov.krd/fines_form.php')">ğŸŒ Open Official Portal</button>
        <p style="font-size: 11px; color: #555; margin-top: 15px;">Ministry of Interior - Kurdistan Region</p>
    </div>
</div>

<script>
    let lang = "en";
    let history = JSON.parse(localStorage.getItem("vin_history")) || [];

    const years = {'A':2010,'B':2011,'C':2012,'D':2013,'E':2014,'F':2015,'G':2016,'H':2017,'J':2018,'K':2019,'L':2020,'M':2021,'N':2022,'P':2023,'R':2024,'S':2025,'T':2026};
    const flags = {'1':'ğŸ‡ºğŸ‡¸','4':'ğŸ‡ºğŸ‡¸','5':'ğŸ‡ºğŸ‡¸','2':'ğŸ‡¨ğŸ‡¦','3':'ğŸ‡²ğŸ‡½','J':'ğŸ‡¯ğŸ‡µ','K':'ğŸ‡°ğŸ‡·','W':'ğŸ‡©ğŸ‡ª','S':'ğŸ‡¬ğŸ‡§','V':'ğŸ‡«ğŸ‡·','Z':'ğŸ‡®ğŸ‡¹','L':'ğŸ‡¨ğŸ‡³'};
    const brands = {"JHM":"Honda","1HG":"Honda","JT2":"Toyota","JTN":"Toyota","WBA":"BMW","WDC":"Mercedes-Benz","WAU":"Audi","WVW":"Volkswagen","JN1":"Nissan","KMH":"Hyundai","KNA":"Kia", "1FA":"Ford", "1GC":"Chevrolet", "1J4":"Jeep", "SAL":"Land Rover"};

    const translations = {
        en: { title:"VIN Decoder ğŸš—", btn:"Decode", hist:"Recent Searches", struct:"Complete VIN Guide", tabVin:"VIN Decoder", tabFines:"Erbil Fines", finesTitle:"Traffic Fines", li1:"<b>1-3:</b> Country & Manufacturer", li2:"<b>4-8:</b> Engine, Type, & Model", li3:"<b>9:</b> Security Check Digit", li4:"<b>10:</b> Model Year (R = 2024)", li5:"<b>11:</b> Assembly Plant Location", li6:"<b>12-17:</b> Unique Serial No." },
        ar: { title:"ÙØ­Øµ Ø§Ù„Ø´Ø§ØµÙŠ ğŸš—", btn:"ØªØ­Ù„ÙŠÙ„", hist:"Ø§Ù„Ø£Ø®ÙŠØ±Ø©", struct:"Ø¯Ù„ÙŠÙ„ VIN Ø§Ù„ÙƒØ§Ù…Ù„", tabVin:"ÙØ­Øµ VIN", tabFines:"ØºØ±Ø§Ù…Ø§Øª Ø£Ø±Ø¨ÙŠÙ„", finesTitle:"ØºØ±Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±", li1:"<b>Ù¡-Ù£:</b> Ø§Ù„Ø¨Ù„Ø¯ ÙˆØ§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…ØµÙ†Ø¹Ø©", li2:"<b>Ù¤-Ù¨:</b> Ø§Ù„Ù…Ø­Ø±ÙƒØŒ Ø§Ù„Ù†ÙˆØ¹ØŒ ÙˆØ§Ù„Ø·Ø±Ø§Ø²", li3:"<b>Ù©:</b> Ø±Ù‚Ù… Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø£Ù…Ù†ÙŠ", li4:"<b>Ù¡Ù :</b> Ø³Ù†Ø© Ø§Ù„ØµÙ†Ø¹ (R = Ù¢Ù Ù¢Ù¤)", li5:"<b>Ù¡Ù¡:</b> ÙƒÙˆØ¯ Ù…ØµÙ†Ø¹ Ø§Ù„ØªØ¬Ù…ÙŠØ¹", li6:"<b>Ù¡Ù¢-Ù¡Ù§:</b> Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ Ø§Ù„ÙØ±ÙŠØ¯" },
        ku: { title:"Ù¾Ø´Ú©Ù†ÛŒÙ†ÛŒ VIN ğŸš—", btn:"Ù¾Ø´Ú©Ù†ÛŒÙ†", hist:"Ú¯Û•Ú•Ø§Ù†Û•Ú©Ø§Ù†", struct:"Ú•ÛØ¨Û•Ø±ÛŒ ØªÛ•ÙˆØ§ÙˆÛŒ VIN", tabVin:"Ù¾Ø´Ú©Ù†ÛŒÙ†ÛŒ VIN", tabFines:"Ø³Ø²Ø§Ú©Ø§Ù†ÛŒ Ù‡Û•ÙˆÙ„ÛØ±", finesTitle:"Ø³Ø²Ø§Ú©Ø§Ù†ÛŒ Ù‡Ø§ØªÙˆÙˆÚ†Û†", li1:"<b>Ù¡-Ù£:</b> ÙˆÚµØ§Øª Ùˆ Ú©Û†Ù…Ù¾Ø§Ù†ÛŒØ§ÛŒ Ø¨Û•Ø±Ù‡Û•Ù…Ù‡ÛÙ†Û•Ø±", li2:"<b>Ù¤-Ù¨:</b> Ø¬Û†Ø±ÛŒ Ø¨Ø²ÙˆÛÙ†Û•Ø± Ùˆ Ù…Û†Ø¯ÛÙ„", li3:"<b>Ù©:</b> Ú©Û†Ø¯ÛŒ Ø¯ÚµÙ†ÛŒØ§ÛŒÛŒ", li4:"<b>Ù¡Ù :</b> Ø³Ø§ÚµÛŒ Ø¨Û•Ø±Ù‡Û•Ù…Ù‡ÛÙ†Ø§Ù† (R = Ù¢Ù Ù¢Ù¤)", li5:"<b>Ù¡Ù¡:</b> Ú©Û†Ø¯ÛŒ Ú©Ø§Ø±Ú¯Û•ÛŒ Ø¨Û•Ø³ØªÙ†Û•ÙˆÛ•", li6:"<b>Ù¡Ù¢-Ù¡Ù§:</b> Ú˜Ù…Ø§Ø±Û•ÛŒ Ø²Ù†Ø¬ÛŒØ±Û•ÛŒÛŒ ØªØ§Ù‚Ø§Ù†Û•" }
    };

    function switchTab(tab) {
        document.getElementById('vinSection').style.display = (tab === 'vin') ? 'block' : 'none';
        document.getElementById('finesSection').style.display = (tab === 'fines') ? 'block' : 'none';
        document.getElementById('tabVin').classList.toggle('active', tab === 'vin');
        document.getElementById('tabFines').classList.toggle('active', tab === 'fines');
    }

    function handleInput(input) {
        let val = input.value.toUpperCase().replace(/[IOQ]/g, '');
        input.value = val;
        document.getElementById("charCount").innerText = `${val.length}/17`;
        document.getElementById("errorMsg").innerText = (input.value.length < 17 && input.value.length > 0) ? "VIN must be 17 characters" : "";
    }

    function changeLanguage() {
        lang = document.getElementById("language").value;
        const t = translations[lang];
        document.getElementById("title").innerText = t.title;
        document.getElementById("decodeBtn").innerText = t.btn;
        document.getElementById("histTitle").innerText = t.hist;
        document.getElementById("tabVin").innerText = t.tabVin;
        document.getElementById("tabFines").innerText = t.tabFines;
        document.getElementById("finesTitle").innerText = t.finesTitle;
        document.getElementById("structTitle").innerText = t.struct;
        document.getElementById("li1").innerHTML = t.li1;
        document.getElementById("li2").innerHTML = t.li2;
        document.getElementById("li3").innerHTML = t.li3;
        document.getElementById("li4").innerHTML = t.li4;
        document.getElementById("li5").innerHTML = t.li5;
        document.getElementById("li6").innerHTML = t.li6;
        document.body.style.direction = (lang === 'en') ? 'ltr' : 'rtl';
        updateHistoryUI();
    }

    function decodeVIN(inputVin = null) {
        const vin = (inputVin || document.getElementById("vinInput").value).toUpperCase().trim();
        if (vin.length !== 17) {
            document.getElementById("errorMsg").innerText = "Please enter all 17 characters";
            return;
        }

        const flag = flags[vin[0]] || 'ğŸ³ï¸';
        const brand = brands[vin.substring(0,3)] || "Vehicle Info";
        const year = years[vin[9]] || "Unknown Year";
        
        // Brand Logo fetching using Clearbit API
        const logoUrl = `https://logo.clearbit.com/${brand.toLowerCase().replace(/\s/g, '')}.com`;

        document.getElementById("result").innerHTML = `
            <div class="card-result">
                <div class="brand-header">
                    <img src="${logoUrl}" class="brand-logo" onerror="this.src='https://cdn-icons-png.flaticon.com/512/741/741407.png'">
                    <div class="brand-text-content">
                        <div style="font-size: 18px; font-weight:bold;">${flag} ${brand}</div>
                        <div style="color: #bbb; font-size: 13px;">Year Code: ${vin[9]} (${year})</div>
                    </div>
                </div>
                <button class="auction-btn" onclick="window.open('https://google.com/search?q=site:bidfax.info+${vin}')">ğŸ–¼ï¸ View Auction Photos (Free)</button>
            </div>
        `;
        if (!inputVin) saveToHistory(vin);
    }

    function saveToHistory(vin) {
        if (!history.includes(vin)) {
            history.unshift(vin);
            if (history.length > 5) history.pop();
            localStorage.setItem("vin_history", JSON.stringify(history));
            updateHistoryUI();
        }
    }

    function clearHistory() {
        history = [];
        localStorage.removeItem("vin_history");
        updateHistoryUI();
    }

    function updateHistoryUI() {
        const list = document.getElementById("historyList");
        list.innerHTML = history.length === 0 ? `<p style="color:#444; font-size:12px;">No recent searches</p>` :
            history.map(v => `<div class="history-item" onclick="decodeVIN('${v}')"><span>${v}</span><span>ğŸ”</span></div>`).join('');
    }

    window.onload = changeLanguage;
</script>
</body>
</html>
